<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Survey</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

	<script
  		src="https://code.jquery.com/jquery-3.2.1.min.js"
  		integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  		crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


</head>
<body>
	<div class="container">
		<h1>The Good Boy Friendship Survey</h1><hr>

		<h2>About you</h2>

		<h3>Name</h3>
		<input type="text" name="" id="name" class="form-control" required="">

		<h3>Your Photo (highly recommended)</h3>
		<input type="text" name="" id="photo" class="form-control" required=""><hr>

		<h2>Questions</h2>

		<h3>Question 1</h3>
		<h4>An afternoon spent laying on the couch in the sun is an afternoon well spent</h4>

		<select class="form-control" id="q1">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 2</h3>
		<h4>Theres no such thing as too much food</h4>

		<select class="form-control" id="q2">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 3</h3>
		<h4>Mailmen are the Devil</h4>

		<select class="form-control" id="q3">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 4</h3>
		<h4>Chasing cars is a must</h4>

		<select class="form-control" id="q4">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 5</h3>
		<h4>I can play fetch longer than my owner can</h4>

		<select class="form-control" id="q5">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 6</h3>
		<h4>When my owner goes away I feel like they died and will never come back</h4>

		<select class="form-control" id="q6">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 7</h3>
		<h4>Anytime is playtime</h4>

		<select class="form-control" id="q7">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 8</h3>
		<h4>Squirrels exist to be chased</h4>

		<select class="form-control" id="q8">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 9</h3>
		<h4>Never miss an opportunity to sniff a good butt</h4>

		<select class="form-control" id="q9">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<h3>Question 10</h3>
		<h4>If you stare at your human long enough they will eventually give you a bite of their food</h4>

		<select class="form-control" id="q10">
			<option value = ""> </option>
			<option value = "1"> 1 (Strongly Disagree)</option>
			<option value = "2"> 2 </option>
			<option value = "3"> 3 </option>
			<option value = "4"> 4 </option>
			<option value = "5"> 5 (Strongly Agree)</option>
		</select>

		<hr>

		<button type="submit" class="btn btn-danger btn-lg btn-block" id="submit"><i class="glyphicon glyphicon-thumbs up" aria-hidden="true"></i>Submit</button>

		<hr>
		<footer class="footer">
	<div class="container">
					<p>
								<a href="api/friend.js">API Friends List</a>

								<a href="https://github.com/Brandon-Pfeiffer/friend-finder">GitHub Repo</a>
					</p>
			</div>
		</footer>

	</div>

	<div id="matchingModal" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
		  <div class="modal-content">
			<div class="modal-header">
			  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			  <h4 class="modal-title">New Friend!</h4>
			</div>
			<div class="modal-body">
			  <h2 id="matchingName"></h2>
			  <img id="matchingPic" src="http://i.telegraph.co.uk/multimedia/archive/03439/dude6_3439641b.jpg" alt="">
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		  </div>
		</div>
	  </div>

	<script type="text/javascript">

		$("#submit").on("click", function() {
			
			function validateForm()  {
					var isValid = true;
					$(".form-control").each(function() {
					if ( $(this).val() === "") {
							isValid = false;
					}
					});
					return isValid;
			}

			if (validateForm()) {

			var newFriend = {
				name: $("#name").val(),
				photo: $("#photo").val(),
				scores: [parseInt($("#q1").val()),
						 parseInt($("#q2").val()),
						 parseInt($("#q3").val()),
						 parseInt($("#q4").val()),
						 parseInt($("#q5").val()),
						 parseInt($("#q6").val()),
						 parseInt($("#q7").val()),
						 parseInt($("#q8").val()),
						 parseInt($("#q9").val()),
						 parseInt($("#q10").val()) ]
			};

				console.log(newFriend);

				var currentURL = window.location.origin;

				$.post(currentURL + "/api/friends", newFriend, function(data) {

					$("#matchingModal").modal("toggle");
					$("#matchingName").text(data.name);
					$("#matchingPic").attr("src", data.photo);

						
			});
			} else {
					alert("Fill out the entire form before submitting!");
			}

		return false;
		});


	</script>		
</body>
</html>
